(function(t){function s(s){for(var i,c,n=s[0],o=s[1],r=s[2],a=0,u=[];a<n.length;a++)c=n[a],Object.prototype.hasOwnProperty.call(l,c)&&l[c]&&u.push(l[c][0]),l[c]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);d&&d(s);while(u.length)u.shift()();return h.push.apply(h,r||[]),e()}function e(){for(var t,s=0;s<h.length;s++){for(var e=h[s],i=!0,n=1;n<e.length;n++){var o=e[n];0!==l[o]&&(i=!1)}i&&(h.splice(s--,1),t=c(c.s=e[0]))}return t}var i={},l={app:0},h=[];function c(s){if(i[s])return i[s].exports;var e=i[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.m=t,c.c=i,c.d=function(t,s,e){c.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,s){if(1&s&&(t=c(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var i in t)c.d(e,i,function(s){return t[s]}.bind(null,i));return e},c.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(s,"a",s),s},c.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},c.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],o=n.push.bind(n);n.push=s,n=n.slice();for(var r=0;r<n.length;r++)s(n[r]);var d=o;h.push([0,"chunk-vendors"]),e()})({0:function(t,s,e){t.exports=e("56d7")},"36ba":function(t,s,e){"use strict";e("ae7c")},"56d7":function(t,s,e){"use strict";e.r(s);var i=e("7a23");const l=Object(i["d"])("div",null,"GAME OVER",-1),h=Object(i["d"])("div",null,"Try again?",-1),c=[l,h],n={id:"turns"},o=Object(i["d"])("div",{class:"landscape"},"TURNS ",-1),r=Object(i["d"])("div",{class:"portrait"},"TURNS: ",-1),d={id:"grid",style:{position:"fixed",margin:"0",padding:"0",left:"50vw",top:"50vh",transform:"translate(-50%,-50%)",width:"100vmin",height:"100vmin","background-color":"black"}},a=["onClick"],u={id:"score"},p=Object(i["d"])("div",{class:"landscape"},"SCORE ",-1),b=Object(i["d"])("div",{class:"portrait"},"SCORE: ",-1),f={class:"portrait"},g={class:"landscape"};function v(t,s,e,l,h,v){return Object(i["g"])(),Object(i["c"])("div",null,[Object(i["k"])(Object(i["d"])("div",{onClick:s[0]||(s[0]=t=>this.restart()),style:{"font-size":"15vmin",color:"white",position:"fixed",left:"0",top:"0",margin:"0",padding:"0",width:"100%",height:"100%","background-color":"rgba(0,0,0,0.75)","z-index":"3",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},c,512),[[i["j"],this.gameOver]]),Object(i["d"])("div",n,[o,r,Object(i["d"])("div",null,Object(i["i"])(this.turns),1)]),Object(i["d"])("div",d,[(Object(i["g"])(!0),Object(i["c"])(i["a"],null,Object(i["h"])(this.cells,(t,s)=>(Object(i["g"])(),Object(i["c"])("div",{id:"cell",key:s,class:Object(i["e"])({active:this.selected[0]===this.text2Vec(s)[0]&&this.selected[1]===this.text2Vec(s)[1]}),style:Object(i["f"])({textAlign:"center",color:"white",position:"absolute",fontSize:100/this.grid[0]*.75+"vmin",padding:0,margin:0,width:100/this.grid[0]+"%",height:100/this.grid[0]+"%",left:t.position[0]*(100/this.grid[0])+"%",top:t.position[1]*(100/this.grid[1])+"%"}),onClick:s=>this.click(t.position)},Object(i["i"])(this.symbols[t.symbol]),15,a))),128))]),Object(i["d"])("div",u,[p,b,Object(i["d"])("div",null,Object(i["i"])(this.score),1),Object(i["k"])(Object(i["d"])("div",f,"  NEXT:",512),[[i["j"],this.score<1e3]]),Object(i["k"])(Object(i["d"])("div",g,"NEXT",512),[[i["j"],this.score<1e3]]),Object(i["k"])(Object(i["d"])("div",null,Object(i["i"])(100*(Math.floor(this.score/100)+1)),513),[[i["j"],this.score<1e3]])])])}var y={name:"App",components:{},data(){return{delta:1e3/60,grid:[8,8],cells:{},symbols:["💦","🐟","🐚","🦐","🦀","🦑"],clicked:[],selected:[],switched:[],clean:!0,score:0,turns:0,gameOver:!1,initialTurns:15,sounds:[]}},computed:{},methods:{text2Vec(t){const s=t.split("_");return[parseInt(s[0]),parseInt(s[1])]},vec2Text(t){return t[0]+"_"+t[1]},restart(){this.score=0,this.empty(),this.populate(),this.turns=this.initialTurns,this.gameOver=!1},empty(){Object.keys(this.cells).forEach(t=>delete this.cells[t])},addScore(t){const s=this.score;this.score+=t,s<1e3&&this.score>=1e3?this.turns+=1/0:s<900&&this.score>=900?this.turns+=this.initialTurns-9:s<800&&this.score>=800?this.turns+=this.initialTurns-8:s<700&&this.score>=700?this.turns+=this.initialTurns-7:s<600&&this.score>=600?this.turns+=this.initialTurns-6:s<500&&this.score>=500?this.turns+=this.initialTurns-5:s<400&&this.score>=400?this.turns+=this.initialTurns-4:s<300&&this.score>=300?this.turns+=this.initialTurns-3:s<200&&this.score>=200?this.turns+=this.initialTurns-2:s<100&&this.score>=100&&(this.turns+=this.initialTurns-1)},check(t,s){let e=!1,i=0;const l=[];i=t[0]-1;while(i+"_"+t[1]in this.cells){if(this.cells[i+"_"+t[1]].symbol!==s)break;l.push([i,t[1]]),i-=1}i=t[0]+1;while(i+"_"+t[1]in this.cells){if(this.cells[i+"_"+t[1]].symbol!==s)break;l.push([i,t[1]]),i+=1}const h=[];i=t[1]-1;while(t[0]+"_"+i in this.cells){if(this.cells[t[0]+"_"+i].symbol!==s)break;h.push([t[0],i]),i-=1}i=t[1]+1;while(t[0]+"_"+i in this.cells){if(this.cells[t[0]+"_"+i].symbol!==s)break;h.push([t[0],i]),i+=1}return(l.length>=2||h.length>=2)&&(e=!0),e},populate(){for(let t=0;t<this.grid[0];t++)for(let s=0;s<this.grid[1];s++)if(!(t+"_"+s in this.cells)){const e=[...this.symbols];while(e.length){const i=parseInt(10*Math.random())%e.length;if(!this.check([t,s],i)){this.cells[t+"_"+s]={symbol:i,position:[t,-1*(this.grid[1]-s)]};break}e.splice(i,1)}}},shift(){let t=!1;const s=.01;return Object.keys(this.cells).forEach(e=>{const i=this.text2Vec(e),l=[i[0]-this.cells[e].position[0],i[1]-this.cells[e].position[1]];if(0!==l[0]||0!==l[1]){const i=[Math.sign(l[0])*Math.min(Math.abs(l[0]),s*this.delta),Math.sign(l[1])*Math.min(Math.abs(l[1]),s*this.delta)];this.cells[e].position=[this.cells[e].position[0]+i[0],this.cells[e].position[1]+i[1]],t||(t=!0)}}),t},solve(t){if(!(t[0]+"_"+t[1]in this.cells))return!1;let s=!1;const e=this.cells[t[0]+"_"+t[1]].symbol;let i=0;const l=[];i=t[0]-1;while(i+"_"+t[1]in this.cells){if(this.cells[i+"_"+t[1]].symbol!==e)break;l.push([i,t[1]]),i-=1}i=t[0]+1;while(i+"_"+t[1]in this.cells){if(this.cells[i+"_"+t[1]].symbol!==e)break;l.push([i,t[1]]),i+=1}const h=[];i=t[1]-1;while(t[0]+"_"+i in this.cells){if(this.cells[t[0]+"_"+i].symbol!==e)break;h.push([t[0],i]),i-=1}i=t[1]+1;while(t[0]+"_"+i in this.cells){if(this.cells[t[0]+"_"+i].symbol!==e)break;h.push([t[0],i]),i+=1}if(l.length>=2||h.length>=2){const e={};if(Object.keys(this.symbols).forEach(t=>{e[t]=0}),l.length>=2&&l.forEach(t=>{const s=this.pop(t);void 0!==s&&(e[s]+=1)}),h.length>=2){h.push([t[0],t[1]]);let s=void 0,i=0;h.forEach(t=>{(void 0===s||t[1]>i)&&(s=t,i=t[1])});for(let t=0;t<h.length;t++){const t=this.pop(s);void 0!==t&&(e[t]+=1)}}else{const s=this.pop(t);void 0!==s&&(e[s]+=1)}s=!0,this.sounds.length&&this.sounds[parseInt(10*Math.random())%this.sounds.length].play(),Object.keys(e).forEach(t=>{const s=e[t];this.addScore(s*s)})}return s},pop(t){let s=void 0;if(!(t[0]+"_"+t[1]in this.cells))return s;let e=t[1];while(t[0]+"_"+e in this.cells){if(t[0]+"_"+(e-1)in this.cells)this.cells[t[0]+"_"+e].symbol=this.cells[t[0]+"_"+(e-1)].symbol,this.cells[t[0]+"_"+e].position=this.cells[t[0]+"_"+(e-1)].position;else{const i=this.cells[t[0]+"_"+e].symbol;delete this.cells[t[0]+"_"+e],s=i}e-=1}return s},click(t){this.clicked.length=0,this.clicked.push(...t)},loop(){if(!this.shift())if(this.clean){if(this.turns<=0)this.gameOver=!0;else if(this.switched.length){const t=this.solve(this.switched),s=this.solve(this.selected);if(t||s)this.populate(),this.clean=!1;else{const t=JSON.parse(JSON.stringify(this.cells[this.switched[0]+"_"+this.switched[1]]));this.cells[this.switched[0]+"_"+this.switched[1]].symbol=this.cells[this.selected[0]+"_"+this.selected[1]].symbol,this.cells[this.switched[0]+"_"+this.switched[1]].position=this.cells[this.selected[0]+"_"+this.selected[1]].position,this.cells[this.selected[0]+"_"+this.selected[1]].symbol=t.symbol,this.cells[this.selected[0]+"_"+this.selected[1]].position=t.position}this.switched.length=0,this.selected.length=0,this.turns-=1}else if(this.clicked.length){if(this.selected.length)if(this.clicked[0]!==this.selected[0]||this.clicked[1]!==this.selected[1])if(1===Math.abs(this.clicked[0]-this.selected[0])&&0===Math.abs(this.clicked[1]-this.selected[1])||0===Math.abs(this.clicked[0]-this.selected[0])&&1===Math.abs(this.clicked[1]-this.selected[1])){this.switched.length=0,this.switched.push(...this.clicked);const t=JSON.parse(JSON.stringify(this.cells[this.switched[0]+"_"+this.switched[1]]));this.cells[this.switched[0]+"_"+this.switched[1]].symbol=this.cells[this.selected[0]+"_"+this.selected[1]].symbol,this.cells[this.switched[0]+"_"+this.switched[1]].position=this.cells[this.selected[0]+"_"+this.selected[1]].position,this.cells[this.selected[0]+"_"+this.selected[1]].symbol=t.symbol,this.cells[this.selected[0]+"_"+this.selected[1]].position=t.position}else this.selected.length=0,this.selected.push(...this.clicked);else this.selected.length=0;else this.selected.length=0,this.selected.push(...this.clicked);this.clicked.length=0}}else{this.clean=!0;for(let t=0;t<this.grid[0];t++)for(let s=0;s<this.grid[1];s++)t+"_"+s in this.cells&&this.solve([t,s])&&(this.clean=!1);this.clean||this.populate()}}},mounted(){for(let t=0;t<0;t++){const s=new Audio("sound"+(t+1)+".wav");this.sounds.push(s)}this.turns=this.initialTurns,this.populate(),setInterval(()=>{this.loop()},this.delta)}};e("36ba");y.render=v;var O=y;Object(i["b"])(O).mount("#app")},ae7c:function(t,s,e){}});
//# sourceMappingURL=app.f5f38f3b.js.map